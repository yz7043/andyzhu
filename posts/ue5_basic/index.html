<!doctype html>
<html lang="en-us">
  <head>
    <title>UE5_basic // Andy Zhu&#39;s Blog</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.110.0">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/andyzhu/css/main.min.3c3c186cd62e563ad6e2f00a89dbee656ab912d1d46f856b5605dd0232521e2a.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="UE5_basic"/>
<meta name="twitter:description" content="Introduction I am learning UE5 with C&#43;&#43;. Here is my notes about some fundamental miscellaneous in UE5.
Outlines Axis Map
Root Component
Auto Possess
Pawn Movement
Character Movement
Content Axis Map Add the mapping to project settings so that our input can be caught and the callback function can be executed every frame
Inside project setting we open Inputtab. Inside Input, we choose Bindings We can add one function name, for example, MoveForward Then we need to add a binded key/keys to this function, for example, &lsquo;W&rsquo; key."/>

    <meta property="og:title" content="UE5_basic" />
<meta property="og:description" content="Introduction I am learning UE5 with C&#43;&#43;. Here is my notes about some fundamental miscellaneous in UE5.
Outlines Axis Map
Root Component
Auto Possess
Pawn Movement
Character Movement
Content Axis Map Add the mapping to project settings so that our input can be caught and the callback function can be executed every frame
Inside project setting we open Inputtab. Inside Input, we choose Bindings We can add one function name, for example, MoveForward Then we need to add a binded key/keys to this function, for example, &lsquo;W&rsquo; key." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yz7043.github.io/andyzhu/posts/ue5_basic/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-01T11:56:32-04:00" />
<meta property="article:modified_time" content="2023-05-01T11:56:32-04:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://yz7043.github.io/andyzhu/"><img class="app-header-avatar" src="/andyzhu/avatar.jpg" alt="John Doe" /></a>
      <span class="app-header-title">Andy Zhu&#39;s Blog</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/andyzhu/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/andyzhu/tags/">Tags</a>
             - 
          
          <a class="app-header-menu-item" href="/andyzhu/about/">About</a>
             - 
          
          <a class="app-header-menu-item" href="/andyzhu/posts/">Post</a>
      </nav>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
      <div class="app-header-social">
        
          <a href="https://github.com/gohugoio" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
          <a href="https://twitter.com/gohugoio" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>Twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">UE5_basic</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          May 1, 2023
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          3 min read
        </div>
      </div>
    </header>
    <div class="post-content">
      <h1 id="introduction">Introduction</h1>
<p>I am learning UE5 with C++. Here is my notes about some fundamental miscellaneous in UE5.</p>
<h1 id="outlines">Outlines</h1>
<p><a href="https://yz7043.github.io/andyzhu/posts/ue5_basic/#AxisMap">Axis Map</a></p>
<p><a href="https://yz7043.github.io/andyzhu/posts/ue5_basic/#RootComponent">Root Component</a></p>
<p><a href="https://yz7043.github.io/andyzhu/posts/ue5_basic/#AutoPossess">Auto Possess</a></p>
<p><a href="https://yz7043.github.io/andyzhu/posts/ue5_basic/#PawnMovement">Pawn Movement</a></p>
<p><a href="https://yz7043.github.io/andyzhu/posts/ue5_basic/#CharacterMovement">Character Movement</a></p>
<h1 id="content">Content</h1>
<h2 id="AxisMap">Axis Map</h2>
<ol>
<li>
<p>Add the mapping to project settings so that our input can be caught and the callback function can be executed every frame</p>
<ol>
<li>Inside <code>project setting</code> we open <code>Input</code>tab.</li>
<li>Inside <code>Input</code>, we choose <code>Bindings</code></li>
<li>We can add one function name, for example, <code>MoveForward</code></li>
<li>Then we need to add a binded key/keys to this function, for example, &lsquo;W&rsquo; key.</li>
</ol>
</li>
<li>
<p>We need to add corresponding functions in our PAWN class</p>
<ol>
<li>
<p>In the header file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">MoveForward</span>(<span style="color:#66d9ef">float</span> Val);
</span></span></code></pre></div></li>
<li>
<p>In the Cpp file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> MyPawn<span style="color:#f92672">::</span>MoveForward(<span style="color:#66d9ef">float</span> Val){
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">/*Detail codes*/</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> MyPawn<span style="color:#f92672">::</span>SetupPlayerInputComponent(UInputComponent<span style="color:#f92672">*</span> PlayerInputCmp){
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// This a virtual function created by Pawn class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// It is used to setup user input binding
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// Param: AxisName, Object Ptr, Callback Function Ptr
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	PlayerInputCmp<span style="color:#f92672">-&gt;</span>BindAxis(FName(<span style="color:#e6db74">&#34;MoveForward&#34;</span>), <span style="color:#66d9ef">this</span>, <span style="color:#f92672">&amp;</span>MyPawn<span style="color:#f92672">::</span>MoveForward);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ol>
</li>
</ol>
<h2 id="RootComponent">How to get root component</h2>
<p>Once we have a base component says a <strong>PAWN</strong>. We usually want to add some mesh to this component. How can we do that?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">// Assume we have a MyPawn.h file 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>UCLASS()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LEARN_API</span> AMyPawn : <span style="color:#66d9ef">public</span> APawn{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* some functions and data members inside this class*/</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Then in MyPawn.cpp file
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>AMyPawn<span style="color:#f92672">::</span>AMyPawn{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Here we want to add a mesh to our capsule
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    UCapsuleComponent<span style="color:#f92672">*</span> Capsule <span style="color:#f92672">=</span> CreateDefaultSubobject<span style="color:#f92672">&lt;</span>UCapsuleComponent<span style="color:#f92672">&gt;</span>(TEXT(<span style="color:#e6db74">&#34;Capsule&#34;</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// We need to do this
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    USkeletalMeshComponent<span style="color:#f92672">*</span> RobotMesh;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 1. create the mesh
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    RobotMesh <span style="color:#f92672">=</span> CreateDefaultSubobject<span style="color:#f92672">&lt;</span>USkeletalMeshComponent<span style="color:#f92672">&gt;</span>(TEXT(<span style="color:#e6db74">&#34;RobotMesh&#34;</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 2. Bond Mesh to the root component
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// We can use RootComponent (a protected member here) too.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// We can use Capsule here since we know it is our root component
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    RobotMesh<span style="color:#f92672">-&gt;</span>SetupAttachment(GetRootComponent());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="AutoPossess">What is auto possess of a PAWN class</h2>
<ol>
<li>You can do it in the UE editor
When we place one pawn blueprint in our world, we are able to control this pawn as our player. How do we configure this?
<ol>
<li>First we need to select the pawn object from outliner</li>
<li>You may find a <code>Details</code> tab sitting besides <code>World Settings</code>. Click that <code>Details</code> tab.</li>
<li>Then search for <code>auto possess</code> and change the <code>auto possess player</code> to your player</li>
</ol>
</li>
<li>You can also do it in your C++ code
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>AutoPossessPlayer <span style="color:#f92672">=</span> EAutoReceiveInput<span style="color:#f92672">::</span>Player0;
</span></span></code></pre></div></li>
</ol>
<h2 id="PawnMovement">Implement Pawn Movement</h2>
<ol>
<li>
<p>Move Forward</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> MyPawn<span style="color:#f92672">::</span>MoveForward(<span style="color:#66d9ef">float</span> Value){
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// This function can handle move forward or backward based on whether Value &gt; 0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// Check if Controller is valid and Value &gt; 0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// Controller is an intrinsic variable for Pawn class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span>((Controller <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) <span style="color:#f92672">&amp;&amp;</span> Value <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0.0</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Get Forward direction
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    FVector FW <span style="color:#f92672">=</span> GetActorForwardVector();
</span></span><span style="display:flex;"><span>    AddMovementInput(FW, Value);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>Add movement component in our Pawn Blueprint</p>
<ol>
<li>Go to MyPawn blueprint</li>
<li>Click + button located at the upper left corner and add a <code>FloatingPawnMovement</code></li>
</ol>
</li>
</ol>
<h2 id="CharacterMovement">Character Movement</h2>
<p>Character class Movement is similar to our Pawn class.</p>
<p>Here we wish to introduce more challenging task.</p>
<ol>
<li>We want to move towards the direction our controller are facing not the instead of the direction of Mesh</li>
<li>We want that the character mesh rotate towards to the direction we are moving</li>
<li>When I move the mouse, I expect the camera move according to the controller not the character (To avoid character facing down to the ground which is against nature)</li>
</ol>
<p>For the first challenge, we need to make use of the Rotation Matrix of Controller instead of <code>GetActorForwardVector</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">MoveForward</span>(<span style="color:#66d9ef">float</span> V){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(Contoller <span style="color:#f92672">&amp;&amp;</span> V <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0.f</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Get the Rotator of controller
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        FRotator ControllerRotation <span style="color:#f92672">=</span> GetControllerRotation();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Because we are moving horizontally, we only care Yaw rotation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    	FRotator YawRotation(<span style="color:#ae81ff">0.f</span>, ControllerRotation, <span style="color:#ae81ff">0.f</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Get the &#34;forward&#34; direction by rotation matrix
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// EAxis::X -&gt; Move forward or back based on V
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// EAxis::Y -&gt; Move left or right
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        FVector Direction <span style="color:#f92672">=</span> FRotationMatrix(YawRotation).GetAxis(EAxis<span style="color:#f92672">::</span>X);
</span></span><span style="display:flex;"><span>    	AddMovementInput(Direction, V);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Then, how do we enable the character to rotate towards where it is moving?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>GetCharacterMovement()<span style="color:#f92672">-&gt;</span>bOrientRotationToMovement <span style="color:#f92672">=</span> true;
</span></span></code></pre></div><p>Third task.</p>
<p>Check <code>Use Pawn Control Rotation</code> for the boom</p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
